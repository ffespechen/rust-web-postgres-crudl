{% extends "base.html" %} {% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
  <h1>Libros Registrados</h1>
  <a href="/web/books" class="btn btn-primary">
    <i class="bi bi-plus-lg"></i> Regresar al Cat√°logo
  </a>
</div>

<div class="row">
  <div class="col-md-4">
    <img src="/{{ book.image_path }}" class="img-fluid rounded shadow" />
  </div>
  <div class="col-md-8">
    <h1>{{ book.title }}</h1>
    <p class="lead">Autor: {{ book.author }} ({{ book.published_date }})</p>
    <hr />

    <h3>Comentarios</h3>
    <form action="/web/books/{{ book.id }}/comments" method="POST" class="mb-4">
      <div class="mb-3">
        <textarea
          name="text"
          class="form-control"
          rows="3"
          placeholder="Escribe un comentario..."
          required
        ></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Publicar</button>
    </form>

    <div class="list-group">
      {% for comment in comments %}
      <div class="list-group-item">
        <p class="mb-1">{{ comment.text }}</p>
        <small class="text-muted"
          >{{ comment.created_at.format("%d/%m/%Y %H:%M") }}</small
        >
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
